(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{390:function(a,e,r){"use strict";r.r(e);var s=r(26),t=Object(s.a)({},(function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h3",{attrs:{id:"基于-react-app-rewired-扩展webpack-默认配置。"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基于-react-app-rewired-扩展webpack-默认配置。"}},[a._v("#")]),a._v(" 基于 react-app-rewired 扩展webpack 默认配置。")]),a._v(" "),r("p",[a._v("使用create-react-app 将能得到 CRA 提供的配置“保证”（比自己从头搭建，解决各个包之间的版本依赖靠谱），\n但是我们仍然想要修改webpack 配置，根据项目做一些自定义修改。")]),a._v(" "),r("h3",{attrs:{id:"安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("yarn add react-app-rewired customize-cra --dev\n\nyarn add less less-loader --dev // 本项目使用了less\n\nyarn add cross-env --dev // 设置环境变量\nyarn add store // 缓存处理库\n\n")])])]),r("h3",{attrs:{id:"根目录创建-config-overrides-js-文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#根目录创建-config-overrides-js-文件"}},[a._v("#")]),a._v(" 根目录创建 config-overrides.js 文件")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("const {override, fixBabelImports, addLessLoader, addWebpackAlias} = require(\"customize-cra\");\nconst path = require(\"path\");\n\nmodule.exports = override(\n    // 针对antd 实现按需打包：根据import来打包 (使用babel-plugin-import)\n    fixBabelImports(\"import\", {\n        libraryName: \"antd\",\n        libraryDirectory: \"es\",\n        style: 'css', //自动打包相关的样式 默认为 style:'css'\n    }),\n    // 使用less-loader对源码重的less的变量进行重新制定\n    addLessLoader({\n        lessOptions: {\n            javascriptEnabled: true,\n            modifyVars: {\n                '@primary-color': '#ffaa22',\n                '@link-color': '#ffaa22'\n            }\n        },\n    }),\n    //增加路径别名的处理\n    addWebpackAlias({\n        '@': path.resolve('./src')\n    })\n);\n\n\n")])])]),r("h4",{attrs:{id:"修改-package-json"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#修改-package-json"}},[a._v("#")]),a._v(" 修改 package.json")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v('"scripts": {\n    "start": "cross-env REACT_APP_ENV=development react-app-rewired start",\n    "build": "cross-env REACT_APP_ENV=production GENERATE_SOURCEMAP=false react-app-rewired build",\n    "stage": "cross-env REACT_APP_ENV=stage react-app-rewired build",\n}\n  \n')])])])])}),[],!1,null,null,null);e.default=t.exports}}]);